{% extends "base.html" %}

{% block head_js %}
<script type="text/javascript" src="https://www.google.com/jsapi"> </script>
	  <script type="text/javascript">

	  	var lat = 0.0;
	  	var lng = 0.0;

	  	var latLng = window.location.href.slice(window.location.href.indexOf('?')).split(/[&?]{1}[\w\d]+=/);
		lat = parseFloat(latLng[1]);
		lng = parseFloat(latLng[2]);

		if (isNaN(lat)){
			lat = 39.09034;
		}
		if (isNaN(lng)){
			lng = -94.58139;
		}

	    var ge;
	    google.load("earth", "1");

	    function init() {
	      google.earth.createInstance("map3d", initCallback, failureCallback);
	    }


	    function initCallback(object) {
	      ge = object;
	      ge.getWindow().setVisibility(true);
	      ge.getOptions().setStatusBarVisibility(true);
	      ge.getNavigationControl().setVisibility(ge.VISIBILITY_AUTO);
	      ge.getLayerRoot().enableLayerById(ge.LAYER_BORDERS, false);
	      ge.getLayerRoot().enableLayerById(ge.LAYER_ROADS, false);
	      ge.getLayerRoot().enableLayerById(ge.LAYER_BUILDINGS, true);
	      ge.getLayerRoot().enableLayerById(ge.LAYER_TERRAIN, true);

	      // var la = ge.createLookAt('');
	      // la.set(lat, lng, 0, ge.ALTITUDE_RELATIVE_TO_GROUND, -20, 80, 300);
	      // ge.getView().setAbstractView(la);         

	        function finished(object) {
	          if (!object) {
	            // wrap alerts in API callbacks and event handlers
	            // in a setTimeout to prevent deadlock in some browsers
	            setTimeout(function() {
	              alert('Bad or null KML.');
	            }, 0);
	            return;
	          }
	          ge.getFeatures().appendChild(object);
	          var la = ge.createLookAt('');
	          la.set(lat, lng, 0, ge.ALTITUDE_RELATIVE_TO_GROUND, -20, 80, 300);
	          ge.getView().setAbstractView(la);         
	        }
	        var url = 'http://planitimpact.org/models/19thAndGrand.kmz';
	        google.earth.fetchKml(ge, url, finished);
	    
	    }

	    function failureCallback(object) {
	      alert('Didn\'t work!');
	    }

	    google.setOnLoadCallback(init);
	  </script>
{% endblock %}

{% block main %}
	
		<div class="container-fluid">
		
			<div class="row-fluid">
				<h1 class="title span6">Report</h1>
				<div class="span6 buttons">
					<a href="#" class="btn btn-primary btn-large pull-right"><span class="fa-icon-share-alt"></span>&nbsp;&nbsp;Export PDF</a>
				</div>
			</div>

		<div class="row-fluid">
				
			<!-- start: Main Menu -->
			<div id="sidebar-left" class="span1">
				<div class="nav-collapse sidebar-nav tabbable">
					<ul class="nav nav-tabs nav-stacked main-menu">
						<li class="active"><a href="#tab1" data-toggle="tab"><i class="fa-icon-globe"></i><span class="hidden-tablet"> Explore</span></a></li>	
						<li><a href="#tab2" data-toggle="tab"><i class="fa-icon-tint"></i><span class="hidden-tablet"> Water Usage</span></a></li>
						<li><a href="#tab3" data-toggle="tab"><i class="fa-icon-cloud"></i><span class="hidden-tablet"> Storm Water</span></a></li>
						<li><a href="#tab4" data-toggle="tab"><i class="fa-icon-bolt"></i><span class="hidden-tablet"> Energy Usage</span></a></li>
						<li><a href="#tab5" data-toggle="tab"><i class="fa-icon-leaf"></i><span class="hidden-tablet"> Greenhouse Gas</span></a></li>
						<li><a href="#tab6" data-toggle="tab"><i class="fa-icon-trash"></i><span class="hidden-tablet"> Waste Production</span></a></li>
						<li><a href="#tab7" data-toggle="tab"><i class="fa-icon-truck"></i><span class="hidden-tablet"> Transportation</span></a></li>
						<li><a href="#tab8" data-toggle="tab"><i class="fa-icon-home"></i><span class="hidden-tablet"> Building Density</span></a></li>
						<li><a href="#tab9" data-toggle="tab"><i class="fa-icon-sitemap"></i><span class="hidden-tablet"> Resource Flow</span></a></li>
						<li><a href="#tab10" data-toggle="tab"><i class="fa-icon-money"></i><span class="hidden-tablet"> Potential ROI</span></a></li>
					</ul>
				</div>
			</div>
			<!-- end: Main Menu -->
			
			<!-- start: Content -->
			<div id="content" class="span11 tab-content">
				<div class="tab-pane active" id="tab1">
					<div id="map3d"></div>
				</div>
				<div class="tab-pane" id="tab2">
					<img src="{{ url_for('static', filename='img/report-mockups.png') }}">
				</div>
				<div class="tab-pane" id="tab3">
				</div>
				<div class="tab-pane" id="tab4">
				    <p>Howdy, I'm in Section 4.</p>
				</div>
				<div class="tab-pane" id="tab5">
				    <p>Howdy, I'm in Section 5.</p>
				</div>
				<div class="tab-pane" id="tab6">
				    <p>Howdy, I'm in Section 6.</p>
				</div>
			</div><!-- end: Content -->
				
		<div class="modal hide fade" id="myModal">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">Ã—</button>
				<h3>Settings</h3>
			</div>
			<div class="modal-body">
				<p>Here settings can be configured...</p>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal">Close</a>
				<a href="#" class="btn btn-primary">Save changes</a>
			</div>
		</div>
	
				
	</div><!--/.fluid-container-->
</div>

{% endblock %}
{% block js_footer %}
	<!-- start: JavaScript-->

		
	<script src="{{ url_for('static', filename='js/jquery-migrate-1.0.0.min.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/jquery-ui-1.10.0.custom.min.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/jquery.ui.touch-punch.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/modernizr.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/jquery.cookie.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/fullcalendar.min.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/jquery.dataTables.min.js') }}"></script>

		<script src="{{ url_for('static', filename='js/excanvas.js') }}"></script>
	<script src="{{ url_for('static', filename='js/jquery.flot.js') }}"></script>
	<script src="{{ url_for('static', filename='js/jquery.flot.pie.js') }}"></script>
	<script src="{{ url_for('static', filename='js/jquery.flot.stack.js') }}"></script>
	<script src="{{ url_for('static', filename='js/jquery.flot.resize.min.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/jquery.chosen.min.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/jquery.uniform.min.js') }}"></script>
		
		<script src="{{ url_for('static', filename='js/jquery.cleditor.min.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/jquery.noty.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/jquery.elfinder.min.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/jquery.raty.min.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/jquery.iphone.toggle.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/jquery.uploadify-3.1.min.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/jquery.gritter.min.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/jquery.imagesloaded.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/jquery.masonry.min.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/jquery.knob.modified.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/jquery.sparkline.min.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/counter.js') }}"></script>
	
		<script src="{{ url_for('static', filename='js/retina.js') }}"></script>

		<script src="{{ url_for('static', filename='js/custom.js') }}"></script>
	<!-- end: JavaScript-->
	{% endblock %}